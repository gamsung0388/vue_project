<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="BoardMapper">
  	<insert id="boardinsert" parameterType="BoardDTO">
  		<selectKey resultType="int" keyProperty="board_num" order="BEFORE">
	        SELECT IFNULL(MAX(BOARD_NUM+1),1) FROM BOARD        
	    </selectKey>  
  		INSERT BOARD(
			BOARD_NUM
		    ,BOARD_TITLE
		    ,BOARD_TXT
		    ,BOARD_TAG
		    ,USER_ID
		    )VALUES(
				#{board_num},
		        #{boardTitle},
		        #{boardTxt},
		        #{boardTag},
		        #{userId}
			);
  	</insert>
  	<update id="boardupdate" parameterType="BoardDTO">
  		UPDATE BOARD
		SET	BOARD_TITLE = #{boardTitle}
		AND BOARD_TXT = #{boardTxt}
		AND BOARD_TAG = #{boardTag}
		AND UDATE_USER_ID = #{userId}
		AND BOARD_UDT= NOW()
		WHERE BOARD_NUM= #{boardNum};
  	</update>
  	<delete id="boarddelete" parameterType="int">
  		DELECT TABLE BOARD
  		WHERE BOARD_NUM= #{boardNum};
  	</delete>  	
	<select id="boardselect" resultType="BoardDTO">
		SELECT BOARD_NUM
			,BOARD_TITLE
		    ,BOARD_TXT
		    ,BOARD_TAG
		    ,BOARD_VIEWCNT
		    ,USER_ID
		    ,UDATE_USER_ID
		    ,BOARD_DATE
		    ,BOARD_UDT
		FROM BOARD;
	</select>
</mapper>  